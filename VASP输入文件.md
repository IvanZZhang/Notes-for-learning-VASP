INCAR:里面写入各种关键词，。  
KPOINTS:确定到空间K点文件。  
POTCAR:确定各原子赝势的文件。  
POSCAR:描述结构文件，主要包括晶格大小、原子类型、原子数目和各原子坐标。

勘误参考：https://mp.weixin.qq.com/s/alrWwmGQ693Zrbgij75XlA

# INCAR：确定计算参数
vasp官网：https://www.vasp.at/wiki/index.php/Category:INCAR_tag

**SYSTEM**：没有实际的作用，如果你是一个细心的人可以用来写计算的体系名称，元素等。  

**ISTART** = 0/1/2 决定是否读取 WAVECAR 文件。  
- 0是代表不读取 WAVECAR 文件，直接开始计算。  
- 1是代表读取 WAVECAR 文件，但是INCAR参数和POSCAR构型可以重新定义。 
- 2是代表读取 WAVECAR 文件，INCAR参数和POSCAR构型不可以重新定义。  

**ICHARG** = 0/1/2/11 决定 VASP 如何构建初始电荷密度。
- 0有CHGCAR文件则读取，没有时间与2的内容相等。
- 1从CHGCAR文件中读取电荷密度。
- 2不从CHGCAR文件中读取电荷密度，取原子电荷密度的叠加。
- 11读取CHGCAR文件，在计算DOS与能带时使用。

**ISIF** = 2/3  
- 2不优化晶格只优化原子。
- 3晶格与原子同时优化。

NSW 离子步骤的最大数量。一般优化可以设置到100或者300。  

**ISYM** = 0/2 决定计算时是否考虑对称性。  
- 0不考虑对称性，可解决一部分因对称性引起的报错。
- 2考虑对称性，对于有对称性体系可以大大减少计算时间。  

**ISPIN** = 2 自旋计算是否被考虑。

**ENCUT**：设置平面波截止能量，单位为eV。

**EDIFF**：设置一个离子步中电子步停止的能量条件，单位为eV。

**EDIFFG**：当两个离子步骤之间的总能量变化小于EDIFFG时，优化停止。

**LWAVE/LCHARG**：控制是否输出WAVECAR或CHGCAR文件。
- .FALSE.不输出，在一般优化时可以选择不输出来节约时间和内存。
- .TRUE.输出，参数的默认值是T，在要计算特殊性质时可以进行单点计算输出。

**NCORE**：确定在单个轨道上工作的计算机核数，并行参数可以加快计算，需要自行测试最优值。我是使用96核集群计算，设置12时计算速度最快。

**LVDW**：是否考虑范德瓦尔斯相互作用。在计算二维材料催化时需要加入的参数。
- 0 无色散校正，0是vasp计算的默认值。
- 10 对应D2修正。
- 11 对应D3修正。

**示例**（苏亚琼老师，Cu111）
```R title:INCAR
Electronic relaxation:
ENCUT   = 400.0      
ALGO    = FAST      
#NELMIN  = 8         
NELM    = 100       
#NELMDL  = -12       
EDIFF   = 1E-4      
AMIX    = 0.20      
BMIX    = 0.0010    
AMIX_MAG    = 0.80
BMIX_MAG    = 0.0010

Calculation mode:
PREC    = Accurate  
ISPIN   = 2         
#MAGMOM = 18*3 18*0 36*1 36*0 1*2 
#NUPDOWN = 2
#LMAXMIX = 4         
ADDGRID = .TRUE.    
LASPH   = .TRUE.    
ISYM    = 0         

LREAL = AUTO

#PBE+U calculation:
#LDAU      = .TRUE.    
#LDAUTYPE  = 2         
#LDAUL     = -1 -1 -1 -1 -1 2   
#LDAUU     = 0.00 0.00 0.00  0.00  0.00 4.00
#LDAUJ     = 0.00 0.00 0.00  0.00  0.00 0.00
#LDAUPRINT = 0         
#
Integration over the Brillouin zone (BZ):
ISMEAR  = 1         
SIGMA   = 0.20        

Ionic relaxation:
NSW     = 100   
EDIFFG  = -0.05     
IBRION  = 2              
POTIM   = 0.10        

DOS calculation:
LORBIT  = 11        

for dipol correction:
#IDIPOL = 3          
#LDIPOL = .TRUE.     
LWAVE = .TRUE.

VDW: 
IVDW = 12

#ISIF = 3

#UV Adsorption
#NBANDS = 1760  # twice of BANDS
#LOPTICS = .TRUE.

NCORE =16

#LSOL = .TRUE.

```
详细分析：[[Cu111计算案例INCAR输入文件分析]]

# KPoints：确定空间K点
第三行确定k点种类，网络生成方式，G表示的是以Gamma点为中心生成网格。另外一种是原始的Monkhorst-Pack 网格，两者的区别是 M 或者 m 在 G的基础上在三个方向上平移了1/（2N）个单位。  

第四行确定在xyz三个方向上生成对应数目的K点，对于二维材料k点多少算法：1/晶格常数/0.03，向上取整即可，一般使用奇数。  

在k点个数取111时，M与G两种方法的结果相等。

**示例**（苏亚琼老师，Cu111）
```R title:KPoints
Polymer                      ! Comment
0                            ! Automatic Generation scheme
M-P                          ! Generate a Gamma-Point Centered Grid
3   3   1                    ! Subdivisions N_1, N_2, and N_3 (K-mesh)
0.0 0.0 0.0                  ! optional shift of the mesh
EOF
```

# POSCAR：描述结构文件
**示例1**（石墨烯单胞）
```
graphite
1.0
        2.4600000381         0.0000000000         0.0000000000
       -1.2300000191         2.1304225263         0.0000000000
        0.0000000000         0.0000000000         15
    C
    2
Direct
     0.000000000         0.000000000         0.250000000
     0.333330005         0.666670024         0.250000000
```
上例子中为一个石墨烯单胞的POSCAR文件，  
- 第一行：随便写没有实际意义，细心的人可以写成每一个结构的名字，但不能不写。
- 第二行：缩放系数，一般都是1.0。
- 第三到五行：晶格的坐标信息，表示在直角坐标系xyz中的三条向量组成的晶胞。
- 第六行：元素行，有几种元素挨个写入即可。
- 第七行：与第六行中元素相对应的原子数目。比如这个POSCAR文件中就有三种元素，碳有49个，铑有1个，银有1个。
```
   C    Rh   Ag
	49     1     1
```

- 第八行：体系中原子的坐标系，可以为笛卡尔坐标（Cartesian）：直接给出原子所处位置的多少，也可以为分数坐标系（Direct）：表示原子在晶格边长中的比例分数。
- 第九行之后：体系中原子的具体位置坐标。

**示例2**（苏亚琼老师，Cu111）
```R title:POSCAR
Cu111:                                  
   1.00000000000000     
       7.615540033379115       0.000000000000000       0.000000000000000
      -0.000000000000000       8.793668176591607       0.000000000000001
       0.000000000000000       0.000000000000000      21.218062399172272
    Cu
    48
Selective Dynamics
Direct
  0.968813647827  0.091627135873  0.000000000000 F F F
  0.968813647827  0.591627135873  0.000000000000 F F F
  0.302146981160  0.091627135873  0.000000000000 F F F
  0.635480314493  0.091627135873  0.000000000000 F F F
  0.635480314493  0.591627135873  0.000000000000 F F F
  0.302146981160  0.591627135873  0.000000000000 F F F
  0.135480314493  0.841627135873  0.000000000000 F F F
  0.468813647827  0.841627135873  0.000000000000 F F F
  0.135480314493  0.341627135873  0.000000000000 F F F
  0.468813647827  0.341627135873  0.000000000000 F F F
  0.802146981160  0.841627135873  0.000000000000 F F F
  0.802146981160  0.341627135873  0.000000000000 F F F
  0.468813647827  0.008293802540  0.097685049059 F F F
  0.135480314493  0.508293802540  0.097685049059 F F F
  0.135480314493  0.008293802540  0.097685049059 F F F
  0.468813647827  0.508293802540  0.097685049059 F F F
  0.802146981160  0.008293802540  0.097685049059 F F F
  0.802146981160  0.508293802540  0.097685049059 F F F
  0.302146981160  0.258293802540  0.097685049059 F F F
  0.968813647827  0.258293802540  0.097685049059 F F F
  0.635480314493  0.758293802540  0.097685049059 F F F
  0.635480314493  0.258293802540  0.097685049059 F F F
  0.302146981160  0.758293802540  0.097685049059 F F F
  0.968813647827  0.758293802540  0.097685049059 F F F
  0.968813647827  0.424960469206  0.195370098117 T T T
  0.468813647827  0.674960469206  0.195370098117 T T T
  0.635480314493  0.424960469206  0.195370098117 T T T
  0.468813647827  0.174960469206  0.195370098117 T T T
  0.802146981160  0.674960469206  0.195370098117 T T T
  0.635480314493  0.924960469206  0.195370098117 T T T
  0.135480314493  0.174960469206  0.195370098117 T T T
  0.302146981160  0.424960469206  0.195370098117 T T T
  0.968813647827  0.924960469206  0.195370098117 T T T
  0.802146981160  0.174960469206  0.195370098117 T T T
  0.302146981160  0.924960469206  0.195370098117 T T T
  0.135480314493  0.674960469206  0.195370098117 T T T
  0.968813647827  0.591627135873  0.293055147176 T T T
  0.302146981160  0.591627135873  0.293055147176 T T T
  0.302146981160  0.091627135873  0.293055147176 T T T
  0.968813647827  0.091627135873  0.293055147176 T T T
  0.635480314493  0.591627135873  0.293055147176 T T T
  0.802146981160  0.841627135873  0.293055147176 T T T
  0.635480314493  0.091627135873  0.293055147176 T T T
  0.135480314493  0.841627135873  0.293055147176 T T T
  0.468813647827  0.341627135873  0.293055147176 T T T
  0.802146981160  0.341627135873  0.293055147176 T T T
  0.135480314493  0.341627135873  0.293055147176 T T T
  0.468813647827  0.841627135873  0.293055147176 T T T
```

# POTCAR：确定各原子赝势
计算物理已经发展了很多年，各种赝势用来描述的不同方法也很多，常见的一般有LDA,PBE,PW91等赝势种类。

而以PBE赝势为例，对同一种元素也有多种不同POTCAR

对于如何选择合适的赝势文件，建议直接看VASP官网的推荐：
https://www.vasp.at/wiki/index.php/Available_PAW_potentials#Recommended_potentials_for_DFT_calculations

## POTCAR文件的构建
手动方法：把各种元素的POTCAR找到vasp推荐并命名POTCAR_H, POTCAR_O, POTCAR_C等等，然后使用Linux命令：

`cat POTCAR_H POTCAR_O POTCAR_C > POTCAR   `

把所有POTCAR合成一个，注意此处的顺序要和POSCAR第六行的元素顺序一致。

简便方法：使用vaspkit 103功能，准备好POSCAR文件后可以直接输出POTCAR文件。附上vaspkit官网：  
https://vaspkit.com/

## POTCAR文件的检查

`
grep TIT POTCAR
`

之后会输出如下：![图片](https://mmbiz.qpic.cn/mmbiz_png/eia95zdMz6BsZ9dfYDx7C8XCn1pibibakdiaqFmxWfYAPTdxwEticCX4T9zbZpuapqbTAt62NSna08MgxBHGKvhe0RQ/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

从上到下的顺序就是POTCAR中元素的顺序，需要和POSCAR第六行的元素顺序一致。  

`grep ZVAL POTCAR   `

之后会输出如下：

可以找到元素赝势中所带的价电子数目。  

准备好四个文件INCAR、KPOINTS、POTCAR、POSCAR后就可以进行计算了。